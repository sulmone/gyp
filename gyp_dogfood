#!/usr/bin/python

# TODO(mark): This script is temporary, and is only being used while Chromium
# is transitioning to GYP-based builds.  It is intended to be used as the
# action of a gclient hook.

import os
import sys

# GYP is now the official build system, so it runs for all platforms.
print 'Updating projects from gyp files...'

try:
  import gyp
except ImportError, e:
  import os.path
  sys.path.append(os.path.join(os.path.dirname(sys.argv[0]), 'pylib'))
  import gyp

# Optionally add supplemental .gypi files if present.
supplements = glob.glob('src/*/supplement.gypi')
for supplement in supplements:
  sys.argv += ['-I', supplement]

if __name__ == '__main__':
  sys.exit(gyp.main(sys.argv[1:]))
