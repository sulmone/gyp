{
  'variables': {
    'depth': '../../..',
  },
  'includes': [
    '../../../build/common.gypi',
  ],
  'targets': [
    {
      'target_name': 'test_shell',
      'type': 'application',
      'sources': [
        'mac/DumpRenderTreePasteboard.h',
        'mac/DumpRenderTreePasteboard.m',
        'mac/KeystoneGlue.h',
        'mac/KeystoneGlue.m',
        'mac/test_shell_webview.h',
        'mac/test_shell_webview.mm',
        'mac/test_webview_delegate.mm',
        'mac/webview_host.mm',
        'mac/webwidget_host.mm',
        'drag_delegate.cc',
        'drag_delegate.h',
        'drop_delegate.cc',
        'drop_delegate.h',
        'event_sending_controller.cc',
        'event_sending_controller.h',
        'foreground_helper.h',
        'layout_test_controller.cc',
        'layout_test_controller.h',
        'resource.h',
        'simple_resource_loader_bridge.cc',
        'simple_resource_loader_bridge.h',
        'test_navigation_controller.cc',
        'test_navigation_controller.h',
        'test_shell.cc',
        'test_shell.h',
        'test_shell_gtk.cc',
        'test_shell_mac.mm',
        'test_shell_main.cc',
        'test_shell_platform_delegate.h',
        'test_shell_platform_delegate_gtk.cc',
        'test_shell_platform_delegate_mac.mm',
        'test_shell_platform_delegate_win.cc',
        'test_shell_request_context.cc',
        'test_shell_request_context.h',
        'test_shell_switches.cc',
        'test_shell_switches.h',
        'test_shell_win.cc',
        'test_webview_delegate.cc',
        'test_webview_delegate.h',
        'test_webview_delegate_gtk.cc',
        'test_webview_delegate_win.cc',
        'text_input_controller.cc',
        'text_input_controller.h',
        'webview_host.h',
        'webview_host_gtk.cc',
        'webview_host_win.cc',
        'webwidget_host.h',
        'webwidget_host_gtk.cc',
        'webwidget_host_win.cc',
      ],
      'resources': [
        # TODO(mark): Too Mac-specific?  It should be named mac_resources if
        # so.
        # TODO(mark): WebCore should probably advertise these resources in its
        # link_dependent_settings section.
        '../../../third_party/WebKit/WebCore/Resources/aliasCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/cellCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/contextMenuCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/copyCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/crossHairCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/eastResizeCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/eastWestResizeCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/helpCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/linkCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/moveCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/noDropCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/noneCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/northEastResizeCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/northEastSouthWestResizeCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/northResizeCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/northSouthResizeCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/northWestResizeCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/northWestSouthEastResizeCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/notAllowedCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/progressCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/southEastResizeCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/southResizeCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/southWestResizeCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/verticalTextCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/waitCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/westResizeCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/zoomInCursor.png',
        '../../../third_party/WebKit/WebCore/Resources/zoomOutCursor.png',
        '../../data/test_shell/',
        'mac/English.lproj/InfoPlist.strings',
        'mac/English.lproj/MainMenu.nib',
        'mac/Info.plist',
        'mac/test_shell.icns',
        'resources/AHEM____.TTF',
      ],
      'resources!': [
        # TODO(mark): Come up with a fancier way to do this (mac_info_plist?)
        # that automatically sets the correct INFOPLIST_FILE setting and adds
        # the file to a source group.
        'mac/Info.plist',
      ],
      'include_dirs': [
        '../../..',
      ],
      'dependencies': [ 
        '../../webkit.gyp:glue',
        '../../../base/base.gyp:base',
        '../../../base/base.gyp:base_gfx',
        '../../../testing/gtest.gyp:gtest',
        '../../../skia/skia.gyp:skia',
        '../../../third_party/npapi/npapi.gyp:npapi',
      ],
      'xcode_settings': {
        'INFOPLIST_FILE': 'mac/Info.plist',
      },
      'conditions': [
        ['OS!="linux"', {'sources/': [['exclude', '_gtk\\.cc$']]}],
        ['OS!="mac"', {
          'sources/': [
            ['exclude', 'mac/[^/]*\\.(cc|mm?)$'],
            ['exclude', '_mac\\.(cc|mm?)$'],
          ]
        }],
        ['OS!="win"', {
          'sources/': [
            ['exclude', '_win\\.cc$']
          ],
          'sources!': [
            'drag_delegate.cc',
            'drop_delegate.cc',
          ],
        }],
      ],
    },
  ],
}
